import { _ as _export_sfc, c as createElementBlock, o as openBlock, a as createStaticVNode } from "./app.222b9ad1.js";
const __pageData = JSON.parse('{"title":"\u4ECB\u7ECD","description":"","frontmatter":{},"headers":[{"level":2,"title":"ip_to_city\u51FD\u6570","slug":"ip-to-city\u51FD\u6570","link":"#ip-to-city\u51FD\u6570","children":[]},{"level":2,"title":"ip_to_city_geo\u51FD\u6570","slug":"ip-to-city-geo\u51FD\u6570","link":"#ip-to-city-geo\u51FD\u6570","children":[]},{"level":2,"title":"ip_to_country\u51FD\u6570","slug":"ip-to-country\u51FD\u6570","link":"#ip-to-country\u51FD\u6570","children":[]},{"level":2,"title":"ip_to_country_code\u51FD\u6570","slug":"ip-to-country-code\u51FD\u6570","link":"#ip-to-country-code\u51FD\u6570","children":[]},{"level":2,"title":"ip_to_domain\u51FD\u6570","slug":"ip-to-domain\u51FD\u6570","link":"#ip-to-domain\u51FD\u6570","children":[]},{"level":2,"title":"ip_to_geo\u51FD\u6570","slug":"ip-to-geo\u51FD\u6570","link":"#ip-to-geo\u51FD\u6570","children":[]},{"level":2,"title":"ip_to_provider\u51FD\u6570","slug":"ip-to-provider\u51FD\u6570","link":"#ip-to-provider\u51FD\u6570","children":[]},{"level":2,"title":"ip_to_province\u51FD\u6570","slug":"ip-to-province\u51FD\u6570","link":"#ip-to-province\u51FD\u6570","children":[]},{"level":2,"title":"ip_prefix\u51FD\u6570","slug":"ip-prefix\u51FD\u6570","link":"#ip-prefix\u51FD\u6570","children":[]},{"level":2,"title":"is_prefix_subnet_of\u51FD\u6570","slug":"is-prefix-subnet-of\u51FD\u6570","link":"#is-prefix-subnet-of\u51FD\u6570","children":[]},{"level":2,"title":"is_subnet_of\u51FD\u6570","slug":"is-subnet-of\u51FD\u6570","link":"#is-subnet-of\u51FD\u6570","children":[]},{"level":2,"title":"ip_subnet_min\u51FD\u6570","slug":"ip-subnet-min\u51FD\u6570","link":"#ip-subnet-min\u51FD\u6570","children":[]},{"level":2,"title":"ip_subnet_max\u51FD\u6570","slug":"ip-subnet-max\u51FD\u6570","link":"#ip-subnet-max\u51FD\u6570","children":[]},{"level":2,"title":"ip_subnet_range\u51FD\u6570","slug":"ip-subnet-range\u51FD\u6570","link":"#ip-subnet-range\u51FD\u6570","children":[]}],"relativePath":"sqlfun/14IP\u51FD\u6570.md"}');
const _sfc_main = { name: "sqlfun/14IP\u51FD\u6570.md" };
const _hoisted_1 = /* @__PURE__ */ createStaticVNode('<h1 id="\u4ECB\u7ECD" tabindex="-1">\u4ECB\u7ECD <a class="header-anchor" href="#\u4ECB\u7ECD" aria-hidden="true">#</a></h1><p>\u672C\u6587\u4ECB\u7ECDIP\u51FD\u6570\u7684\u57FA\u672C\u8BED\u6CD5\u53CA\u793A\u4F8B\u3002</p><h1 id="\u51FD\u6570\u793A\u4F8B" tabindex="-1">\u51FD\u6570\u793A\u4F8B <a class="header-anchor" href="#\u51FD\u6570\u793A\u4F8B" aria-hidden="true">#</a></h1><p>\u65E5\u5FD7\u670D\u52A1\u652F\u6301\u5982\u4E0BIP\u51FD\u6570\u3002</p><blockquote><p>\u5728\u65E5\u5FD7\u670D\u52A1\u5206\u6790\u8BED\u53E5\u4E2D\uFF0C\u8868\u793A\u5B57\u7B26\u4E32\u7684\u5B57\u7B26\u5FC5\u987B\u4F7F\u7528\u5355\u5F15\u53F7\uFF08&#39;&#39;\uFF09\u5305\u88F9\uFF0C\u65E0\u7B26\u53F7\u5305\u88F9\u6216\u88AB\u53CC\u5F15\u53F7\uFF08&quot;&quot;\uFF09\u5305\u88F9\u7684\u5B57\u7B26\u8868\u793A\u5B57\u6BB5\u540D\u6216\u5217\u540D\u3002\u4F8B\u5982\uFF1A&#39;status&#39;\u8868\u793A\u5B57\u7B26\u4E32status\uFF0Cstatus\u6216&quot;status&quot;\u8868\u793A\u65E5\u5FD7\u5B57\u6BB5status\u3002</p></blockquote><table><thead><tr><th>\u51FD\u6570\u7C7B\u578B</th><th>\u51FD\u6570\u540D\u79F0</th><th>\u8BED\u6CD5</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>IP\u5730\u5740\u51FD\u6570</td><td><a href="#ip_to_city%E5%87%BD%E6%95%B0">ip_to_city\u51FD\u6570</a></td><td>ip_to_city( <em>x</em> )</td><td>\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u57CE\u5E02\u3002 \u8FD4\u56DE\u7ED3\u679C\u4E3A\u57CE\u5E02\u7684\u4E2D\u6587\u540D\u79F0\u3002</td></tr><tr><td>IP\u5730\u5740\u51FD\u6570</td><td><a href="#ip_to_city%E5%87%BD%E6%95%B0">ip_to_city\u51FD\u6570</a></td><td>ip_to_city( <em>x</em> , &#39;en&#39;)</td><td>\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u57CE\u5E02\u3002 \u8FD4\u56DE\u7ED3\u679C\u4E3A\u57CE\u5E02\u7684\u884C\u653F\u533A\u5212\u4EE3\u7801\u3002</td></tr><tr><td>IP\u5730\u5740\u51FD\u6570</td><td><a href="#ip_to_city_geo%E5%87%BD%E6%95%B0">ip_to_city_geo\u51FD\u6570</a></td><td>ip_to_city_geo( <em>x</em> )</td><td>\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u57CE\u5E02\u7684\u7ECF\u7EAC\u5EA6\u3002\u6B64\u51FD\u6570\u8FD4\u56DE\u7684\u662F\u57CE\u5E02\u7ECF\u7EAC\u5EA6\uFF0C\u6BCF\u4E2A\u57CE\u5E02\u53EA\u6709\u4E00\u4E2A\u7ECF\u7EAC\u5EA6\u3002</td></tr><tr><td>IP\u5730\u5740\u51FD\u6570</td><td><a href="#ip_to_country%E5%87%BD%E6%95%B0">ip_to_country\u51FD\u6570</a></td><td>ip_to_country( <em>x</em> )</td><td>\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u56FD\u5BB6\u6216\u5730\u533A\u3002 \u8FD4\u56DE\u7ED3\u679C\u4E3A\u56FD\u5BB6\u6216\u5730\u533A\u7684\u4E2D\u6587\u540D\u79F0\u3002</td></tr><tr><td>IP\u5730\u5740\u51FD\u6570</td><td><a href="#ip_to_country%E5%87%BD%E6%95%B0">ip_to_country\u51FD\u6570</a></td><td>ip_to_country( <em>x</em> , &#39;en&#39;)</td><td>\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u56FD\u5BB6\u6216\u5730\u533A\u3002 \u8FD4\u56DE\u7ED3\u679C\u4E3A\u56FD\u5BB6\u6216\u5730\u533A\u7684\u4EE3\u7801\u3002</td></tr><tr><td>IP\u5730\u5740\u51FD\u6570</td><td><a href="#ip_to_country_code%E5%87%BD%E6%95%B0">ip_to_country_code\u51FD\u6570</a></td><td>ip_to_country_code( <em>x</em> )</td><td>\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u56FD\u5BB6\u6216\u5730\u533A\u3002 \u8FD4\u56DE\u7ED3\u679C\u4E3A\u56FD\u5BB6\u6216\u5730\u533A\u7684\u4EE3\u7801\u3002</td></tr><tr><td>IP\u5730\u5740\u51FD\u6570</td><td><a href="#ip_to_domain%E5%87%BD%E6%95%B0">ip_to_domain\u51FD\u6570</a></td><td>ip_to_domain( <em>x</em> )</td><td>\u5224\u65AD\u76EE\u6807IP\u5730\u5740\u662F\u5185\u7F51\u5730\u5740\u8FD8\u662F\u5916\u7F51\u5730\u5740\u3002</td></tr><tr><td>IP\u5730\u5740\u51FD\u6570</td><td><a href="#ip_to_geo%E5%87%BD%E6%95%B0">ip_to_geo\u51FD\u6570</a></td><td>ip_to_geo( <em>x</em> )</td><td>\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5728\u4F4D\u7F6E\u7684\u7ECF\u7EAC\u5EA6\u3002</td></tr><tr><td>IP\u5730\u5740\u51FD\u6570</td><td><a href="#ip_to_provider%E5%87%BD%E6%95%B0">ip_to_provider\u51FD\u6570</a></td><td>ip_to_provider( <em>x</em> )</td><td>\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5BF9\u5E94\u7684\u7F51\u7EDC\u8FD0\u8425\u5546\u3002</td></tr><tr><td>IP\u5730\u5740\u51FD\u6570</td><td><a href="#ip_to_province%E5%87%BD%E6%95%B0">ip_to_province\u51FD\u6570</a></td><td>ip_to_province( <em>x</em> )</td><td>\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u7701\u4EFD\u5DDE\u3002 \u8FD4\u56DE\u7ED3\u679C\u4E3A\u7701\u4EFD\u5DDE\u7684\u4E2D\u6587\u540D\u79F0\u3002</td></tr><tr><td>IP\u5730\u5740\u51FD\u6570</td><td><a href="#ip_to_province%E5%87%BD%E6%95%B0">ip_to_province\u51FD\u6570</a></td><td>ip_to_province( <em>x</em> , &#39;en&#39;)</td><td>\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u7701\u4EFD\u5DDE\u3002 \u8FD4\u56DE\u7ED3\u679C\u4E3A\u7701\u4EFD\u5DDE\u7684\u884C\u653F\u533A\u5212\u4EE3\u7801\u3002</td></tr><tr><td>IP\u7F51\u6BB5\u51FD\u6570</td><td><a href="#ip_prefix%E5%87%BD%E6%95%B0">ip_prefix\u51FD\u6570</a></td><td>ip_prefix( <em>x</em> , <em>prefix_bits</em> )</td><td>\u83B7\u53D6\u76EE\u6807IP\u5730\u5740\u7684\u524D\u7F00\u3002</td></tr><tr><td>IP\u7F51\u6BB5\u51FD\u6570</td><td><a href="#is_prefix_subnet_of%E5%87%BD%E6%95%B0">is_prefix_subnet_of\u51FD\u6570</a></td><td>is_prefix_subnet_of( <em>x</em> , <em>y</em> )</td><td>\u5224\u65AD\u76EE\u6807\u7F51\u6BB5\u662F\u5426\u4E3A\u67D0\u7F51\u6BB5\u7684\u5B50\u7F51\u3002</td></tr><tr><td>IP\u7F51\u6BB5\u51FD\u6570</td><td><a href="#is_subnet_of%E5%87%BD%E6%95%B0">is_subnet_of\u51FD\u6570</a></td><td>is_subnet_of( <em>x</em> , <em>y</em> )</td><td>\u5224\u65AD\u76EE\u6807IP\u5730\u5740\u662F\u5426\u5728\u67D0\u7F51\u6BB5\u5185\u3002</td></tr><tr><td>IP\u7F51\u6BB5\u51FD\u6570</td><td><a href="#ip_subnet_max%E5%87%BD%E6%95%B0">ip_subnet_max\u51FD\u6570</a></td><td>ip_subnet_max( <em>x</em> )</td><td>\u83B7\u53D6IP\u7F51\u6BB5\u4E2D\u7684\u6700\u5927IP\u5730\u5740\u3002</td></tr><tr><td>IP\u7F51\u6BB5\u51FD\u6570</td><td><a href="#ip_subnet_min%E5%87%BD%E6%95%B0">ip_subnet_min\u51FD\u6570</a></td><td>ip_subnet_min( <em>x</em> )</td><td>\u83B7\u53D6IP\u7F51\u6BB5\u4E2D\u7684\u6700\u5C0FIP\u5730\u5740\u3002</td></tr><tr><td>IP\u7F51\u6BB5\u51FD\u6570</td><td><a href="#ip_subnet_range%E5%87%BD%E6%95%B0">ip_subnet_range\u51FD\u6570</a></td><td>ip_subnet_range( <em>x</em> )</td><td>\u83B7\u53D6IP\u7F51\u6BB5\u8303\u56F4\u3002</td></tr></tbody></table><h1 id="\u6848\u4F8B" tabindex="-1">\u6848\u4F8B <a class="header-anchor" href="#\u6848\u4F8B" aria-hidden="true">#</a></h1><h2 id="ip-to-city\u51FD\u6570" tabindex="-1">ip_to_city\u51FD\u6570 <a class="header-anchor" href="#ip-to-city\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_to_city\u51FD\u6570\u7528\u4E8E\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u57CE\u5E02\u3002</p><ul><li><p>\u8FD4\u56DE\u57CE\u5E02\u7684\u4E2D\u6587\u540D\u79F0\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_to_city(x)</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u8FD4\u56DE\u57CE\u5E02\u7684\u884C\u653F\u533A\u5212\u4EE3\u7801\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_to_city(x,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>\n<span class="line"></span></code></pre></div></li></ul><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u5730\u5740\u3002</td></tr></tbody></table><p>varchar\u7C7B\u578B\u3002</p><p>\u7EDF\u8BA1\u6765\u81EA\u4E0D\u540C\u57CE\u5E02\u7684\u8BF7\u6C42\u7684\u5E73\u5747\u65F6\u95F4\u3001\u6700\u5927\u65F6\u95F4\u4EE5\u53CA\u6700\u5927\u65F6\u95F4\u5BF9\u5E94\u7684\u8BF7\u6C42ID\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> |</span></span>\n<span class="line"><span style="color:#F78C6C;">SELECT</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">AVG</span><span style="color:#A6ACCD;">(request_time) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> avg_request_time,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">MAX</span><span style="color:#A6ACCD;">(request_time) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> max_request_time,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  MAX_BY(requestId, request_time) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> requestId,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  ip_to_city(client_ip) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> city</span></span>\n<span class="line"><span style="color:#F78C6C;">GROUP BY</span></span>\n<span class="line"><span style="color:#A6ACCD;">  city</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7114436261/p295175.png" alt="ip_to_city"></p></li></ul><h2 id="ip-to-city-geo\u51FD\u6570" tabindex="-1">ip_to_city_geo\u51FD\u6570 <a class="header-anchor" href="#ip-to-city-geo\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_to_city_geo\u51FD\u6570\u7528\u4E8E\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u57CE\u5E02\u7684\u7ECF\u7EAC\u5EA6\u3002\u6B64\u51FD\u6570\u8FD4\u56DE\u7684\u662F\u57CE\u5E02\u7ECF\u7EAC\u5EA6\uFF0C\u6BCF\u4E2A\u57CE\u5E02\u53EA\u6709\u4E00\u4E2A\u7ECF\u7EAC\u5EA6\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_to_city_geo(x)</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u5730\u5740\u3002</td></tr></tbody></table><p>varchar\u7C7B\u578B\uFF0C\u683C\u5F0F\u4E3A<code>\u7EAC\u5EA6,\u7ECF\u5EA6</code>\u3002</p><p>\u7EDF\u8BA1IP\u5730\u5740\u7684\u7ECF\u7EAC\u5EA6\uFF0C\u786E\u8BA4\u5BA2\u6237\u7AEF\u5206\u5E03\u60C5\u51B5\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> |</span></span>\n<span class="line"><span style="color:#F78C6C;">SELECT</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> PV,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  ip_to_city_geo(client_ip) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> geo</span></span>\n<span class="line"><span style="color:#F78C6C;">GROUP BY</span></span>\n<span class="line"><span style="color:#A6ACCD;">  geo</span></span>\n<span class="line"><span style="color:#F78C6C;">ORDER BY</span></span>\n<span class="line"><span style="color:#A6ACCD;">  PV </span><span style="color:#F78C6C;">DESC</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4023436261/p295142.png" alt="ip_to_city_geo"></p></li></ul><h2 id="ip-to-country\u51FD\u6570" tabindex="-1">ip_to_country\u51FD\u6570 <a class="header-anchor" href="#ip-to-country\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_to_country\u51FD\u6570\u7528\u4E8E\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u56FD\u5BB6\u6216\u5730\u533A\u3002</p><ul><li><p>\u8FD4\u56DE\u56FD\u5BB6\u6216\u5730\u533A\u7684\u4E2D\u6587\u540D\u79F0\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_to_country(x)</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u8FD4\u56DE\u56FD\u5BB6\u6216\u5730\u533A\u7684\u4EE3\u7801\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_to_country(x,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>\n<span class="line"></span></code></pre></div></li></ul><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u5730\u5740\u3002</td></tr></tbody></table><p>varchar\u7C7B\u578B\u3002</p><p>\u7EDF\u8BA1\u6765\u81EA\u4E0D\u540C\u56FD\u5BB6\u6216\u5730\u533A\u7684\u8BF7\u6C42\u7684\u5E73\u5747\u65F6\u95F4\u3001\u6700\u5927\u65F6\u95F4\u4EE5\u53CA\u6700\u5927\u65F6\u95F4\u5BF9\u5E94\u7684\u8BF7\u6C42ID\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> |</span></span>\n<span class="line"><span style="color:#F78C6C;">SELECT</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">AVG</span><span style="color:#A6ACCD;">(request_time) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> avg_request_time,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">MAX</span><span style="color:#A6ACCD;">(request_time) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> max_request_time,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  MAX_BY(requestId, request_time) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> requestId,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  ip_to_country(client_ip) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> country</span></span>\n<span class="line"><span style="color:#F78C6C;">GROUP BY</span></span>\n<span class="line"><span style="color:#A6ACCD;">  country</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4023436261/p230160.png" alt="\u5EF6\u65F6\u60C5\u51B5"></p></li></ul><h2 id="ip-to-country-code\u51FD\u6570" tabindex="-1">ip_to_country_code\u51FD\u6570 <a class="header-anchor" href="#ip-to-country-code\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_to_country_code\u51FD\u6570\u7528\u4E8E\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u56FD\u5BB6\u6216\u5730\u533A\uFF0C\u8FD4\u56DE\u56FD\u5BB6\u6216\u5730\u533A\u7684\u4EE3\u7801\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_to_country_code(x)</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u5730\u5740\u3002</td></tr></tbody></table><p>varchar\u7C7B\u578B\u3002</p><p>\u7EDF\u8BA1\u6765\u81EA\u4E0D\u540C\u56FD\u5BB6\u6216\u5730\u533A\u7684\u8BF7\u6C42\u7684\u5E73\u5747\u65F6\u95F4\u3001\u6700\u5927\u65F6\u95F4\u4EE5\u53CA\u6700\u5927\u65F6\u95F4\u5BF9\u5E94\u7684\u8BF7\u6C42ID\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> |</span></span>\n<span class="line"><span style="color:#F78C6C;">SELECT</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">AVG</span><span style="color:#A6ACCD;">(request_time) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> avg_request_time,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">MAX</span><span style="color:#A6ACCD;">(request_time) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> max_request_time,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  MAX_BY(requestId, request_time) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> requestId,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  ip_to_country_code(client_ip) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> country</span></span>\n<span class="line"><span style="color:#F78C6C;">GROUP BY</span></span>\n<span class="line"><span style="color:#A6ACCD;">  country</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4023436261/p295148.png" alt="ip_to_country_code"></p></li></ul><h2 id="ip-to-domain\u51FD\u6570" tabindex="-1">ip_to_domain\u51FD\u6570 <a class="header-anchor" href="#ip-to-domain\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_to_domain\u51FD\u6570\u7528\u4E8E\u5224\u65AD\u76EE\u6807IP\u5730\u5740\u662F\u5185\u7F51\u5730\u5740\u8FD8\u662F\u5916\u7F51\u5730\u5740\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_to_domain(x)</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u5730\u5740\u3002</td></tr></tbody></table><p>varchar\u7C7B\u578B\uFF0C\u8FD4\u56DEintranet\u6216internet\u3002</p><ul><li><p>intranet\u8868\u793A\u5185\u7F51\u3002</p></li><li><p>internet\u8868\u793A\u5916\u7F51\u3002</p></li></ul><p>\u7EDF\u8BA1\u4E0D\u662F\u6765\u81EA\u5185\u7F51\u7684\u8BF7\u6C42\u603B\u6570\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> PV </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> ip_to_domain(client_ip)</span><span style="color:#89DDFF;">!=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">intranet</span><span style="color:#89DDFF;">&#39;</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5846246261/p230090.png" alt="\u4E0D\u6765\u81EA\u5185\u7F51\u7684\u8BF7\u6C42"></p></li></ul><h2 id="ip-to-geo\u51FD\u6570" tabindex="-1">ip_to_geo\u51FD\u6570 <a class="header-anchor" href="#ip-to-geo\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_to_geo\u51FD\u6570\u7528\u4E8E\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5728\u4F4D\u7F6E\u7684\u7ECF\u7EAC\u5EA6\u3002\u5173\u4E8Egeohash\u51FD\u6570\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u89C1<a href="./t15139.html#reference-sm3-1zx-g2b">\u5730\u7406\u51FD\u6570</a>\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_to_geo(x)</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u5730\u5740\u3002</td></tr></tbody></table><p>varchar\u7C7B\u578B\uFF0C\u683C\u5F0F\u4E3A<code>\u7EAC\u5EA6,\u7ECF\u5EA6</code>\u3002</p><p>\u7EDF\u8BA1IP\u5730\u5740\u7684\u7ECF\u7EAC\u5EA6\uFF0C\u786E\u8BA4\u5BA2\u6237\u7AEF\u5206\u5E03\u60C5\u51B5\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> |</span></span>\n<span class="line"><span style="color:#F78C6C;">SELECT</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> PV,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  ip_to_geo(client_ip) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> geo</span></span>\n<span class="line"><span style="color:#F78C6C;">GROUP BY</span></span>\n<span class="line"><span style="color:#A6ACCD;">  geo</span></span>\n<span class="line"><span style="color:#F78C6C;">ORDER BY</span></span>\n<span class="line"><span style="color:#A6ACCD;">  PV </span><span style="color:#F78C6C;">DESC</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4023436261/p230060.png" alt="\u5BA2\u6237\u7AEF\u5206\u5E03"></p></li></ul><h2 id="ip-to-provider\u51FD\u6570" tabindex="-1">ip_to_provider\u51FD\u6570 <a class="header-anchor" href="#ip-to-provider\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_to_provider\u51FD\u6570\u7528\u4E8E\u5206\u6790\u76EE\u6807IP\u5730\u5740\u5BF9\u5E94\u7684\u7F51\u7EDC\u8FD0\u8425\u5546\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_to_provider(x)</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u5730\u5740\u3002</td></tr></tbody></table><p>varchar\u7C7B\u578B\u3002</p><p>\u7EDF\u8BA1\u901A\u8FC7\u4E0D\u540C\u7F51\u7EDC\u8FD0\u8425\u5546\u53D1\u8D77\u7684\u8BF7\u6C42\u7684\u5E73\u5747\u8BF7\u6C42\u65F6\u95F4\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> |</span></span>\n<span class="line"><span style="color:#F78C6C;">SELECT</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(request_time) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> avg_request_time,</span></span>\n<span class="line"><span style="color:#A6ACCD;">  ip_to_provider(client_ip) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">provider</span></span>\n<span class="line"><span style="color:#F78C6C;">GROUP BY</span></span>\n<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">provider</span></span>\n<span class="line"><span style="color:#F78C6C;">ORDER BY</span></span>\n<span class="line"><span style="color:#A6ACCD;">  avg_request_time</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4023436261/p230066.png" alt="\u8FD0\u8425\u5546\u5EF6\u65F6"></p></li></ul><h2 id="ip-to-province\u51FD\u6570" tabindex="-1">ip_to_province\u51FD\u6570 <a class="header-anchor" href="#ip-to-province\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_to_province\u51FD\u6570\u5206\u6790\u76EE\u6807IP\u5730\u5740\u6240\u5C5E\u7701\u4EFD\u5DDE\u3002</p><ul><li><p>\u8FD4\u56DE\u7701\u4EFD\u5DDE\u7684\u4E2D\u6587\u540D\u79F0\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_to_province(x)</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u8FD4\u56DE\u7701\u4EFD\u5DDE\u7684\u884C\u653F\u533A\u5212\u4EE3\u7801\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_to_province(x,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">en</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>\n<span class="line"></span></code></pre></div></li></ul><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u5730\u5740\u3002</td></tr></tbody></table><p>varchar\u7C7B\u578B\u3002</p><p>\u7EDF\u8BA1\u8BF7\u6C42\u603B\u6570Top10\u7684\u7701\u4EFD\u5DDE\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> PV, ip_to_province(client_ip) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> province </span><span style="color:#F78C6C;">GROUP BY</span><span style="color:#A6ACCD;"> province </span><span style="color:#F78C6C;">ORDER BY</span><span style="color:#A6ACCD;"> PV </span><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">LIMIT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span></span>\n<span class="line"></span></code></pre></div><p>\u5982\u679C\u4E0A\u8FF0\u7ED3\u679C\u4E2D\u5305\u542B\u4E86\u5185\u7F51\u8BF7\u6C42\uFF0C\u4E14\u60A8\u5E0C\u671B\u8FC7\u6EE4\u8FD9\u90E8\u5206\u8BF7\u6C42\uFF0C\u53EF\u53C2\u8003\u5982\u4E0B\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> PV, ip_to_province(client_ip) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> province </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> ip_to_domain(client_ip) </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">intranet</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">GROUP BY</span><span style="color:#A6ACCD;"> province </span><span style="color:#F78C6C;">ORDER BY</span><span style="color:#A6ACCD;"> PV </span><span style="color:#F78C6C;">DESC</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">LIMIT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4023436261/p230092.png" alt="top10\u7701\u4EFD"></p></li></ul><h2 id="ip-prefix\u51FD\u6570" tabindex="-1">ip_prefix\u51FD\u6570 <a class="header-anchor" href="#ip-prefix\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_prefix\u51FD\u6570\u7528\u4E8E\u83B7\u53D6\u76EE\u6807IP\u5730\u5740\u7684\u524D\u7F00\u3002\u8FD4\u56DE\u5B50\u7F51\u63A9\u7801\u683C\u5F0F\u7684IP\u5730\u5740\uFF0C\u4F8B\u5982192.168.1.0/24\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_prefix(x, prefix_bits)</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u5730\u5740\u3002</td></tr><tr><td><em>prefix_bits</em></td><td>\u524D\u7F00\u4F4D\u6570\u3002</td></tr></tbody></table><p>varchar\u7C7B\u578B\u3002</p><p>\u83B7\u53D6client_ip\u5B57\u6BB5\u503C\u7684IP\u5730\u5740\u524D\u7F00\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> ip_prefix(client_ip,</span><span style="color:#F78C6C;">24</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> client_ip</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4023436261/p295152.png" alt="ip_prefix"></p></li></ul><h2 id="is-prefix-subnet-of\u51FD\u6570" tabindex="-1">is_prefix_subnet_of\u51FD\u6570 <a class="header-anchor" href="#is-prefix-subnet-of\u51FD\u6570" aria-hidden="true">#</a></h2><p>is_prefix_subnet_of\u51FD\u6570\u7528\u4E8E\u5224\u65AD\u76EE\u6807\u7F51\u6BB5\u662F\u5426\u4E3A\u67D0\u7F51\u6BB5\u7684\u5B50\u7F51\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">is_prefix_subnet_of(x, y)</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u7F51\u6BB5\u3002y\u7F51\u6BB5\u662F\u5426\u5C5E\u4E8Ex\u7F51\u6BB5\u5185\u3002</td></tr><tr><td><em>y</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u7F51\u6BB5\u3002</td></tr></tbody></table><p>boolean\u7C7B\u578B\u3002</p><p>\u5224\u65ADclient_ip\u5B57\u6BB5\u503C\u6240\u5728\u7F51\u6BB5\u662F\u5426\u5C5E\u4E8E192.168.0.1/24\u7F51\u6BB5\u5185\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> is_prefix_subnet_of(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">192.168.0.1/24</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#82AAFF;">concat</span><span style="color:#A6ACCD;">(client_ip,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/24</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4023436261/p295160.png" alt="is_subnet_of"></p></li></ul><h2 id="is-subnet-of\u51FD\u6570" tabindex="-1">is_subnet_of\u51FD\u6570 <a class="header-anchor" href="#is-subnet-of\u51FD\u6570" aria-hidden="true">#</a></h2><p>is_subnet_of\u51FD\u6570\u7528\u4E8E\u5224\u65AD\u76EE\u6807IP\u5730\u5740\u662F\u5426\u5728\u67D0\u7F51\u6BB5\u5185\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">is_subnet_of(x, y)</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u7F51\u6BB5\u3002</td></tr><tr><td><em>y</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u5730\u5740\u3002</td></tr></tbody></table><p>boolean\u7C7B\u578B\u3002</p><p>\u5224\u65ADclient_ip\u5B57\u6BB5\u503C\u662F\u5426\u5C5E\u4E8E192.168.0.1/24\u7F51\u6BB5\u5185\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> is_subnet_of(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">192.168.0.1/24</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,client_ip)</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4023436261/p295160.png" alt="is_subnet_of"></p></li></ul><h2 id="ip-subnet-min\u51FD\u6570" tabindex="-1">ip_subnet_min\u51FD\u6570 <a class="header-anchor" href="#ip-subnet-min\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_subnet_min\u51FD\u6570\u7528\u4E8E\u83B7\u53D6IP\u7F51\u6BB5\u4E2D\u7684\u6700\u5C0FIP\u5730\u5740\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_subnet_min(x)</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u7F51\u6BB5\u3002</td></tr></tbody></table><p>varchar\u7C7B\u578B\u3002</p><p>\u83B7\u53D6client_ip\u5B57\u6BB5\u503C\u6240\u5728\u7F51\u6BB5\u7684\u6700\u5C0FIP\u5730\u5740\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> ip_subnet_min(</span><span style="color:#82AAFF;">concat</span><span style="color:#A6ACCD;">(client_ip,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/24</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4023436261/p295164.png" alt="ip_subnet_min"></p></li></ul><h2 id="ip-subnet-max\u51FD\u6570" tabindex="-1">ip_subnet_max\u51FD\u6570 <a class="header-anchor" href="#ip-subnet-max\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_subnet_max\u51FD\u6570\u7528\u4E8E\u83B7\u53D6IP\u7F51\u6BB5\u4E2D\u6700\u5927IP\u5730\u5740\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_subnet_max(x)</span></span>\n<span class="line"></span></code></pre></div><p>vac</p><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u7F51\u6BB5\u3002</td></tr></tbody></table><p>varchar\u7C7B\u578B\u3002</p><p>\u83B7\u53D6client_ip\u5B57\u6BB5\u503C\u6240\u5728\u7F51\u6BB5\u7684\u6700\u5927IP\u5730\u5740\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> ip_subnet_max(</span><span style="color:#82AAFF;">concat</span><span style="color:#A6ACCD;">(client_ip,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/24</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5023436261/p295167.png" alt="ip_subnet_max"></p></li></ul><h2 id="ip-subnet-range\u51FD\u6570" tabindex="-1">ip_subnet_range\u51FD\u6570 <a class="header-anchor" href="#ip-subnet-range\u51FD\u6570" aria-hidden="true">#</a></h2><p>ip_subnet_range\u7528\u4E8E\u83B7\u53D6IP\u7F51\u6BB5\u8303\u56F4\u3002</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">ip_subnet_range(x)</span></span>\n<span class="line"></span></code></pre></div><table><thead><tr><th>\u53C2\u6570</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td><em>x</em></td><td>\u53C2\u6570\u503C\u4E3AIP\u7F51\u6BB5\u3002</td></tr></tbody></table><p>JSON\u7C7B\u578B\u3002</p><p>\u83B7\u53D6client_ip\u5B57\u6BB5\u503C\u6240\u5728\u7F51\u6BB5\u7684\u8303\u56F4\u3002</p><ul><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u8BED\u53E5</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> ip_subnet_range(</span><span style="color:#82AAFF;">concat</span><span style="color:#A6ACCD;">(client_ip,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/24</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span></span>\n<span class="line"></span></code></pre></div></li><li><p>\u67E5\u8BE2\u548C\u5206\u6790\u7ED3\u679C</p><p><img src="https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5023436261/p295168.png" alt="ip_subnet_range"></p></li></ul>', 107);
const _hoisted_108 = [
  _hoisted_1
];
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", null, _hoisted_108);
}
const _14IP__ = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export {
  __pageData,
  _14IP__ as default
};
